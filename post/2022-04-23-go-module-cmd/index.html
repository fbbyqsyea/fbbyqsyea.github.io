<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="zh-cn" lang="zh-cn">
<head>
  <link href="https://gmpg.org/xfn/11" rel="profile">
  <meta http-equiv="content-type" content="text/html; charset=utf-8">
  <meta name="generator" content="Hugo 0.117.0">

  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">

  <title>Go Modules 配置 &amp; 命令 &middot; bing随遇而安</title>
  <meta name="description" content="" />

  
  <link type="text/css" rel="stylesheet" href="/css/print.css" media="print">
  <link type="text/css" rel="stylesheet" href="/css/poole.css">
  <link type="text/css" rel="stylesheet" href="/css/syntax.css">
  <link type="text/css" rel="stylesheet" href="/css/hyde.css">
    <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Abril+Fatface|PT+Sans:400,400i,700">


  
  
  
  <link rel="shortcut icon" type="image/x-icon" href="/favicon.ico">

  
  
</head>

  <body class="theme-base-0c ">
  <aside class="sidebar">
  <div class="container sidebar-sticky">
    <div class="sidebar-about">
      <a href="/"><h1>bing随遇而安</h1></a>
      <p class="lead">
       废柴都是间歇性的自虐 强者却是持续性的自律 
      </p>
    </div>

    <nav>
      <ul class="sidebar-nav">
        <li><a href="/">首页</a> </li>
        <li><a href="//tags">标签</a> </li>
        
      </ul>
    </nav>

    <p>&copy; 2023. All rights reserved. </p>
  </div>
</aside>

    <main class="content container">
    <div class="post">
  <h1>Go Modules 配置 &amp; 命令</h1>
  <time datetime=2022-04-23T00:00:00Z class="post-date">Sat, Apr 23, 2022</time>
  <h3 id="初始化行为">初始化行为</h3>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-shell" data-lang="shell"><span style="display:flex;"><span><span style="color:#75715e"># 创建项目目录</span>
</span></span><span style="display:flex;"><span>$ mkdir go-gin-example <span style="color:#f92672">&amp;&amp;</span> cd go-gin-example
</span></span><span style="display:flex;"><span><span style="color:#75715e"># 打开go modules开关(目前在1.18中默认值为 auto)</span>
</span></span><span style="display:flex;"><span>$ go env -w GO111MODULE<span style="color:#f92672">=</span>on
</span></span><span style="display:flex;"><span><span style="color:#75715e"># 设置goproxy代理，解决国内外网访问不了导致的包下载不了的问题  该配置有两个参数，</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># 第一个是 https://goproxy.cn，它是由七牛云背书的一个强大稳定的 Go 模块代理，可以有效地解决你的外网问题；</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># 第二个是 direct，它是一个特殊的 fallback 选项，它的作用是用于指示 Go 在拉取模块时遇到错误会回源到模块版本的源地址去抓取（比如 GitHub 等）。</span>
</span></span><span style="display:flex;"><span>$ go env -w GOPROXY<span style="color:#f92672">=</span>https://goproxy.cn,direct
</span></span><span style="display:flex;"><span><span style="color:#75715e"># 初始化Modules 它将会生成 go.mod 文件，需要注意的是 MODULE_PATH 填写的是模块引入路径，你可以根据自己的情况修改路径。</span>
</span></span><span style="display:flex;"><span>$ go mod init github.com/fbbyqsyea/go-gin-example
</span></span></code></pre></div><h3 id="基础使用">基础使用</h3>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-shell" data-lang="shell"><span style="display:flex;"><span><span style="color:#75715e"># go get 拉去最新的依赖</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># 拉取最新的版本(优先选取的tag)</span>
</span></span><span style="display:flex;"><span>$ go get golang.org/x/text@latest
</span></span><span style="display:flex;"><span><span style="color:#75715e"># 拉取master分支的最新commit</span>
</span></span><span style="display:flex;"><span>$ go get golang.org/x/text@master
</span></span><span style="display:flex;"><span><span style="color:#75715e"># 拉取tag指定版本的commit</span>
</span></span><span style="display:flex;"><span>$ go get golang.org/x/text@v0.1.2.3
</span></span><span style="display:flex;"><span><span style="color:#75715e"># 拉取 hash 为 342b231 的 commit</span>
</span></span><span style="display:flex;"><span>$ go get golang.org/x/text@342b231
</span></span><span style="display:flex;"><span><span style="color:#75715e"># 更新现有的依赖</span>
</span></span><span style="display:flex;"><span>$ go get -u
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># 下载go.mod文件中指明的所有依赖</span>
</span></span><span style="display:flex;"><span>$ go mod download
</span></span><span style="display:flex;"><span><span style="color:#75715e"># 整理现有的依赖</span>
</span></span><span style="display:flex;"><span>$ go mod tidy
</span></span><span style="display:flex;"><span><span style="color:#75715e"># 查看现有的依赖结构</span>
</span></span><span style="display:flex;"><span>$ go mod graph
</span></span><span style="display:flex;"><span><span style="color:#75715e"># 初始化go.mod文件</span>
</span></span><span style="display:flex;"><span>$ go mod init moduleName
</span></span><span style="display:flex;"><span><span style="color:#75715e"># 编辑go.mod文件</span>
</span></span><span style="display:flex;"><span>$ go mod edit
</span></span><span style="display:flex;"><span><span style="color:#75715e"># 导出现有的所有依赖 (事实上 Go modules 正在淡化 Vendor 的概念)</span>
</span></span><span style="display:flex;"><span>$ go mod vendor
</span></span><span style="display:flex;"><span><span style="color:#75715e"># 校验一个模块是否被篡改过</span>
</span></span><span style="display:flex;"><span>$go mod verify
</span></span></code></pre></div><h3 id="gosum">go.sum</h3>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-text" data-lang="text"><span style="display:flex;"><span>go.sum 文件详细罗列了当前项目直接或间接依赖的所有模块版本，并写明了那些模块版本的 SHA-256 哈希值以备 Go 在今后的操作中保证项目所依赖的那些模块版本不会被篡改。
</span></span></code></pre></div><h3 id="gomod">go.mod</h3>
<pre tabindex="0"><code>go.mod文件是启用go modules的项目所必需的最重要的文件，他描述了当前模块的元信息，每一行以一个动词开头，目前有以下5个动词。

module：用于定义当前项目的模块路径
go:用于设置预期的go版本
require：用于设置一个特定的模块版本
exclude：用于从使用中排除一个特定的模块版本
replace：用于将一个模块版本替换为另一个模块版本
</code></pre>
</div>


    </main>

    
      
    
  </body>
</html>
