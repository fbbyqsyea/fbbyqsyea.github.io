<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>go中的等值比较 | bing随遇而安</title>
    <meta name="generator" content="VuePress 1.9.9">
    <link rel="icon" href="/logo.png">
    <meta name="description" content="

在编程过程中，我们经常需要比较两个值是否相等。go提供了丰富的数据类型，那么这些类型都是怎么进行等值比较的呢？下面我们来学习一下。

go中的数据类型
基本类型
    整型
    (int8, int16, int32, int64, int, uint8, uint16, uint32, uint64, uint, byte, rune)
    浮点型
    (fl ...">
    
    <link rel="preload" href="/assets/css/0.styles.7de31a01.css" as="style"><link rel="preload" href="/assets/js/app.20f2d714.js" as="script"><link rel="preload" href="/assets/js/6.86d33cf6.js" as="script"><link rel="preload" href="/assets/js/3.122d5fd9.js" as="script"><link rel="preload" href="/assets/js/60.f82dec03.js" as="script"><link rel="prefetch" href="/assets/js/10.8f78e4d8.js"><link rel="prefetch" href="/assets/js/11.2657ec05.js"><link rel="prefetch" href="/assets/js/12.d23da198.js"><link rel="prefetch" href="/assets/js/13.cb896045.js"><link rel="prefetch" href="/assets/js/14.f7014cd5.js"><link rel="prefetch" href="/assets/js/15.d271d8f6.js"><link rel="prefetch" href="/assets/js/16.1ed35f77.js"><link rel="prefetch" href="/assets/js/17.f948313b.js"><link rel="prefetch" href="/assets/js/18.fdec87a3.js"><link rel="prefetch" href="/assets/js/19.c871bc56.js"><link rel="prefetch" href="/assets/js/20.3cc1bb01.js"><link rel="prefetch" href="/assets/js/21.b9d53585.js"><link rel="prefetch" href="/assets/js/22.fb44072f.js"><link rel="prefetch" href="/assets/js/23.050dc1d5.js"><link rel="prefetch" href="/assets/js/24.e780ac86.js"><link rel="prefetch" href="/assets/js/25.80262333.js"><link rel="prefetch" href="/assets/js/26.cea7e97b.js"><link rel="prefetch" href="/assets/js/27.23141d4c.js"><link rel="prefetch" href="/assets/js/28.6e00a82c.js"><link rel="prefetch" href="/assets/js/29.765137d8.js"><link rel="prefetch" href="/assets/js/30.1dfae280.js"><link rel="prefetch" href="/assets/js/31.619710f3.js"><link rel="prefetch" href="/assets/js/32.b2ba2b4e.js"><link rel="prefetch" href="/assets/js/33.8f979719.js"><link rel="prefetch" href="/assets/js/34.77ca4544.js"><link rel="prefetch" href="/assets/js/35.8b63bb58.js"><link rel="prefetch" href="/assets/js/36.b0bfa1bd.js"><link rel="prefetch" href="/assets/js/37.a995eb26.js"><link rel="prefetch" href="/assets/js/38.a062b2bf.js"><link rel="prefetch" href="/assets/js/39.d954ad62.js"><link rel="prefetch" href="/assets/js/4.380f1af6.js"><link rel="prefetch" href="/assets/js/40.e6e0cf43.js"><link rel="prefetch" href="/assets/js/41.9c6c775f.js"><link rel="prefetch" href="/assets/js/42.77b86103.js"><link rel="prefetch" href="/assets/js/43.56377a0f.js"><link rel="prefetch" href="/assets/js/44.6cfba6ea.js"><link rel="prefetch" href="/assets/js/45.9fc18aa9.js"><link rel="prefetch" href="/assets/js/46.6237e124.js"><link rel="prefetch" href="/assets/js/47.0f2e95bf.js"><link rel="prefetch" href="/assets/js/48.0a94ac53.js"><link rel="prefetch" href="/assets/js/49.99856a36.js"><link rel="prefetch" href="/assets/js/5.084c9b71.js"><link rel="prefetch" href="/assets/js/50.cf6f1a0e.js"><link rel="prefetch" href="/assets/js/51.4a83ff5a.js"><link rel="prefetch" href="/assets/js/52.ba1346dd.js"><link rel="prefetch" href="/assets/js/53.1c990a56.js"><link rel="prefetch" href="/assets/js/54.576aac00.js"><link rel="prefetch" href="/assets/js/55.a76ea924.js"><link rel="prefetch" href="/assets/js/56.221904c4.js"><link rel="prefetch" href="/assets/js/57.ac62e0fb.js"><link rel="prefetch" href="/assets/js/58.e72496b2.js"><link rel="prefetch" href="/assets/js/59.0e60a760.js"><link rel="prefetch" href="/assets/js/61.d786dbab.js"><link rel="prefetch" href="/assets/js/62.65521ed5.js"><link rel="prefetch" href="/assets/js/63.e999e220.js"><link rel="prefetch" href="/assets/js/64.54ac400a.js"><link rel="prefetch" href="/assets/js/65.245670f2.js"><link rel="prefetch" href="/assets/js/66.9f292fb6.js"><link rel="prefetch" href="/assets/js/67.4f4ed97a.js"><link rel="prefetch" href="/assets/js/68.61b42ea3.js"><link rel="prefetch" href="/assets/js/69.a5fcafb4.js"><link rel="prefetch" href="/assets/js/7.358fd391.js"><link rel="prefetch" href="/assets/js/70.9490ba98.js"><link rel="prefetch" href="/assets/js/71.e4902e53.js"><link rel="prefetch" href="/assets/js/72.b6d5a4d8.js"><link rel="prefetch" href="/assets/js/73.7f268733.js"><link rel="prefetch" href="/assets/js/74.7a5c3547.js"><link rel="prefetch" href="/assets/js/8.6d90bc1f.js"><link rel="prefetch" href="/assets/js/9.0a60c476.js"><link rel="prefetch" href="/assets/js/vuejs-paginate.ac365ac7.js">
    <link rel="stylesheet" href="/assets/css/0.styles.7de31a01.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div id="vuepress-theme-blog__global-layout"><section id="header-wrapper"><header id="header"><div class="header-wrapper"><div class="title"><a href="/" class="nav-link home-link">bing随遇而安 </a></div> <div class="header-right-wrap"><ul class="nav"><li class="nav-item"><a href="/" class="nav-link">首页</a></li><li class="nav-item"><a href="/algorithm/" class="nav-link">算法</a></li><li class="nav-item"><a href="/data-structure/" class="nav-link">数据结构</a></li><li class="nav-item"><a href="/tag/" class="nav-link">标签</a></li></ul> <div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <!----></div></div></header></section> <div id="mobile-header"><div class="mobile-header-bar"><div class="mobile-header-title"><a href="/" class="nav-link mobile-home-link">bing随遇而安 </a> <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-menu"><line x1="3" y1="12" x2="21" y2="12"></line><line x1="3" y1="6" x2="21" y2="6"></line><line x1="3" y1="18" x2="21" y2="18"></line></svg></div> <div class="mobile-menu-wrapper"><hr class="menu-divider"> <ul class="mobile-nav"><li class="mobile-nav-item"><a href="/" class="nav-link">首页</a></li><li class="mobile-nav-item"><a href="/algorithm/" class="nav-link">算法</a></li><li class="mobile-nav-item"><a href="/data-structure/" class="nav-link">数据结构</a></li><li class="mobile-nav-item"><a href="/tag/" class="nav-link">标签</a></li> <li class="mobile-nav-item"><!----></li></ul></div></div></div> <div class="content-wrapper"><div id="vuepress-theme-blog__post-layout"><article itemscope="itemscope" itemtype="https://schema.org/BlogPosting" class="vuepress-blog-theme-content"><header><h1 itemprop="name headline" class="post-title">
        
      </h1> <div class="post-meta"><div itemprop="publisher author" itemtype="http://schema.org/Person" itemscope="itemscope" class="post-meta-author"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-navigation"><polygon points="3 11 22 2 13 21 11 13 3 11"></polygon></svg> <span itemprop="name">BING随遇而安</span> <span itemprop="address">   in Shanghai</span></div> <div class="post-meta-date"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-clock"><circle cx="12" cy="12" r="10"></circle><polyline points="12 6 12 12 16 14"></polyline></svg> <time pubdate itemprop="datePublished" datetime="2024-07-06T00:00:00.000Z">
      2024-07-06
    </time></div> <ul itemprop="keywords" class="post-meta-tags"><li class="post-tag" data-v-42ccfcd5><a href="/tag/golang" data-v-42ccfcd5><span data-v-42ccfcd5>golang</span></a></li></ul></div></header> <div itemprop="articleBody" class="content__default"><h1 id="go中的等值比较"><a href="#go中的等值比较" class="header-anchor">#</a> go中的等值比较</h1> <p>在编程过程中，我们经常需要比较两个值是否相等。go提供了丰富的数据类型，那么这些类型都是怎么进行等值比较的呢？下面我们来学习一下。</p> <h2 id="go中的数据类型"><a href="#go中的数据类型" class="header-anchor">#</a> go中的数据类型</h2> <ul><li>基本类型
<ul><li>整型
(int8, int16, int32, int64, int, uint8, uint16, uint32, uint64, uint, byte, rune)</li> <li>浮点型
(float32, float64)</li> <li>布尔型
(bool)</li> <li>字符串
(string)</li></ul></li> <li>复合类型
<ul><li>数组
(array)</li> <li>结构体
(struct)</li></ul></li> <li>引用类型
<ul><li>切片
(slice)</li> <li>映射
(map)</li> <li>通道
(channel)</li> <li>指针
(pointer)</li></ul></li> <li>接口类型
<ul><li>接口
(interface)</li></ul></li></ul> <h2 id="类型比较的前提"><a href="#类型比较的前提" class="header-anchor">#</a> 类型比较的前提</h2> <p>在Golang（Go语言）中，<b>进行类型比较的前提是确保待比较的两个值具有相同的类型</b>。具体而言，有以下几点需要注意：</p> <ol><li><p><strong>类型相同</strong>：只有相同类型的变量才能直接进行比较。如果类型不同，需要先进行类型转换。</p></li> <li><p><strong>可比较性</strong>：并不是所有的类型都可以进行比较。基本类型、复合类型是可比较的。接口类型也是可比较的，但它们实际指向的底层类型也必须是可比较的。</p></li> <li><p><strong>特殊类型的比较</strong>：</p> <ul><li><strong>指针</strong>：指针可以比较，比较的是它们指向的地址。</li> <li><strong>切片（Slice）</strong>：切片本身是不可比较的，除了与 <code>nil</code> 比较。</li> <li><strong>映射（Map）</strong>：映射也是不可比较的，除了与 <code>nil</code> 比较。</li> <li><strong>函数</strong>：函数是不可比较的，除了与 <code>nil</code> 比较。</li></ul></li> <li><p><strong>接口的比较</strong>：空接口类型（<code>interface{}</code>）可以比较，但比较时会检查它们动态类型和值是否相同。</p></li> <li><p><strong>自定义类型</strong>：如果定义了一个自定义类型，并且该类型包含了可比较的字段，那么实例之间可以进行比较。</p></li></ol> <h2 id="类型的等值比较"><a href="#类型的等值比较" class="header-anchor">#</a> 类型的等值比较</h2> <h3 id="基本类型"><a href="#基本类型" class="header-anchor">#</a> 基本类型</h3> <p>基本类型可以直接使用 <code>==</code> 进行比较。</p> <div class="language-go extra-class"><pre class="language-go"><code><span class="token comment">// int</span>
<span class="token keyword">var</span> a<span class="token punctuation">,</span> b <span class="token builtin">int</span> <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">1</span>
<span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;整数等值判断：a == b =&gt; &quot;</span><span class="token punctuation">,</span> a <span class="token operator">==</span> b<span class="token punctuation">)</span>
<span class="token comment">// float</span>
<span class="token keyword">var</span> c<span class="token punctuation">,</span> d <span class="token builtin">float64</span> <span class="token operator">=</span> <span class="token number">1.0</span><span class="token punctuation">,</span> <span class="token number">1.0</span>
<span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;浮点数等值判断：c == d =&gt; &quot;</span><span class="token punctuation">,</span> c <span class="token operator">==</span> d<span class="token punctuation">)</span>
<span class="token comment">// string</span>
<span class="token keyword">var</span> str1<span class="token punctuation">,</span> str2 <span class="token builtin">string</span> <span class="token operator">=</span> <span class="token string">&quot;1&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;1&quot;</span>
<span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;字符串等值判断：str1 == str2 =&gt; &quot;</span><span class="token punctuation">,</span> str1 <span class="token operator">==</span> str2<span class="token punctuation">)</span>
<span class="token comment">// 整数等值判断：a == b =&gt;  true</span>
<span class="token comment">// 浮点数等值判断：c == d =&gt;  true</span>
<span class="token comment">// 字符串等值判断：str1 == str2 =&gt;  true</span>
</code></pre></div><p>需要注意的是浮点类型的比较是不精确的</p> <div class="language-go extra-class"><pre class="language-go"><code><span class="token keyword">var</span> e<span class="token punctuation">,</span> f<span class="token punctuation">,</span> g <span class="token builtin">float64</span> <span class="token operator">=</span> <span class="token number">0.1</span><span class="token punctuation">,</span> <span class="token number">0.2</span><span class="token punctuation">,</span> <span class="token number">0.3</span>
<span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;浮点数等值判断：e  + f == g =&gt; &quot;</span><span class="token punctuation">,</span> e<span class="token operator">+</span>f <span class="token operator">==</span> g<span class="token punctuation">)</span>
<span class="token comment">// 浮点数等值判断：e  + f == g =&gt;  false</span>
</code></pre></div><h3 id="复合类型"><a href="#复合类型" class="header-anchor">#</a> 复合类型</h3> <h4 id="数组-array"><a href="#数组-array" class="header-anchor">#</a> 数组(array)</h4> <p>如果两个数组的元素类型和长度都相同，那么它们可以直接使用 <code>==</code> 进行比较。 只有当每个元素都想等的时候才能判断两个数组想等。</p> <div class="language-go extra-class"><pre class="language-go"><code><span class="token keyword">var</span> arr1 <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">3</span><span class="token punctuation">]</span><span class="token builtin">int</span><span class="token punctuation">{</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">}</span>
<span class="token keyword">var</span> arr2 <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">3</span><span class="token punctuation">]</span><span class="token builtin">int</span><span class="token punctuation">{</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">}</span>
<span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;数组等值判断：arr1 == arr2 =&gt; &quot;</span><span class="token punctuation">,</span> arr1 <span class="token operator">==</span> arr2<span class="token punctuation">)</span>
<span class="token comment">// 数组等值判断：arr1 == arr2 =&gt;  true</span>
</code></pre></div><h4 id="结构体-struct"><a href="#结构体-struct" class="header-anchor">#</a> 结构体(struct)</h4> <p>如果两个结构体的字段类型和顺序都相同，那么它们可以直接使用 <code>==</code> 进行比较。 只有当每个字段都想等的时候才能判断两个结构体想等。</p> <div class="language-go extra-class"><pre class="language-go"><code><span class="token keyword">type</span> Person <span class="token keyword">struct</span> <span class="token punctuation">{</span>
    name <span class="token builtin">string</span>
    age <span class="token builtin">int</span>
<span class="token punctuation">}</span>
<span class="token keyword">var</span> p1 <span class="token operator">=</span> Person<span class="token punctuation">{</span><span class="token string">&quot;张三&quot;</span><span class="token punctuation">,</span> <span class="token number">18</span><span class="token punctuation">}</span>
<span class="token keyword">var</span> p2 <span class="token operator">=</span> Person<span class="token punctuation">{</span><span class="token string">&quot;张三&quot;</span><span class="token punctuation">,</span> <span class="token number">18</span><span class="token punctuation">}</span>
<span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;结构体等值判断：p1 == p2 =&gt; &quot;</span><span class="token punctuation">,</span> p1 <span class="token operator">==</span> p2<span class="token punctuation">)</span>
<span class="token comment">// 结构体等值判断：p1 == p2 =&gt;  true</span>
</code></pre></div><h3 id="引用类型"><a href="#引用类型" class="header-anchor">#</a> 引用类型</h3> <h4 id="切片-slice"><a href="#切片-slice" class="header-anchor">#</a> 切片(slice)</h4> <p>在 Go 语言中，切片（slice）是一种引用类型。切片本身并不存储数据，它是对底层数组的一个视图。因此，切片的比较不同于基本类型（如整数、字符串等），不能简单地使用 <code>==</code> 运算符进行比较。主要原因如下：</p> <ol><li><p><strong>引用类型特性</strong>：</p> <ul><li>切片本质上是一个结构体，包含指向底层数组的指针、切片的长度和容量。两个不同的切片可能指向同一个底层数组，或者它们可能是不同的切片，但指向相同的底层数组。</li></ul></li> <li><p><strong>底层数组的影响</strong>：</p> <ul><li>切片的比较涉及到其底层数组的比较。两个切片虽然可能包含相同的元素，但它们可能指向不同的底层数组。因此，仅仅通过 <code>==</code> 运算符比较切片本身并不能准确反映切片的内容是否相同。</li></ul></li> <li><p><strong>安全性考虑</strong>：</p> <ul><li>Go 语言的设计避免了隐式的底层数组复制和内存操作，这样的设计有助于提高性能和避免不必要的内存开销。因此，切片的比较需要明确地按照元素进行比较，而不是简单地比较切片的引用。</li></ul></li></ol> <p>所以，在比较切片时，需要明确地按照元素进行比较，而不是简单地比较切片的引用。如果使用<code>==</code>比较两个切片，会报如下错误：</p> <div class="language-go extra-class"><pre class="language-go"><code><span class="token keyword">var</span> sli1 <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token builtin">int</span><span class="token punctuation">{</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">}</span>
sli2 <span class="token operator">:=</span> sli1
<span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;切片等值判断：sli1 == sli2 =&gt; &quot;</span><span class="token punctuation">,</span> sli1 <span class="token operator">==</span> sli2<span class="token punctuation">)</span> 
<span class="token comment">// invalid operation: sli1 == sli2 (slice can only be compared to nil)compilerUndefinedOp</span>
</code></pre></div><h5 id="正确的切片比较方式"><a href="#正确的切片比较方式" class="header-anchor">#</a> 正确的切片比较方式</h5> <p>要比较两个切片的内容是否相同，需要逐个比较切片的每个元素。通常可以使用以下方式之一：</p> <ul><li><p><strong>循环比较</strong>：</p> <div class="language-go extra-class"><pre class="language-go"><code><span class="token keyword">package</span> main

<span class="token keyword">import</span> <span class="token string">&quot;fmt&quot;</span>

<span class="token keyword">func</span> <span class="token function">equalSlices</span><span class="token punctuation">(</span>slice1<span class="token punctuation">,</span> slice2 <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token builtin">int</span><span class="token punctuation">)</span> <span class="token builtin">bool</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token function">len</span><span class="token punctuation">(</span>slice1<span class="token punctuation">)</span> <span class="token operator">!=</span> <span class="token function">len</span><span class="token punctuation">(</span>slice2<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token boolean">false</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">for</span> i <span class="token operator">:=</span> <span class="token keyword">range</span> slice1 <span class="token punctuation">{</span>
        <span class="token keyword">if</span> slice1<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">!=</span> slice2<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token punctuation">{</span>
            <span class="token keyword">return</span> <span class="token boolean">false</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">return</span> <span class="token boolean">true</span>
<span class="token punctuation">}</span>

<span class="token keyword">func</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    slice1 <span class="token operator">:=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token builtin">int</span><span class="token punctuation">{</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">}</span>
    slice2 <span class="token operator">:=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token builtin">int</span><span class="token punctuation">{</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">}</span>
    slice3 <span class="token operator">:=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token builtin">int</span><span class="token punctuation">{</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">}</span>

    fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token function">equalSlices</span><span class="token punctuation">(</span>slice1<span class="token punctuation">,</span> slice2<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment">// 输出: true</span>
    fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token function">equalSlices</span><span class="token punctuation">(</span>slice1<span class="token punctuation">,</span> slice3<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment">// 输出: false</span>
<span class="token punctuation">}</span>
</code></pre></div></li> <li><p><strong>使用 <code>reflect.DeepEqual</code></strong>：</p></li></ul> <div class="language-go extra-class"><pre class="language-go"><code><span class="token keyword">package</span> main

<span class="token keyword">import</span> <span class="token punctuation">(</span>
    <span class="token string">&quot;fmt&quot;</span>
    <span class="token string">&quot;reflect&quot;</span>
<span class="token punctuation">)</span>

<span class="token keyword">func</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    slice1 <span class="token operator">:=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token builtin">int</span><span class="token punctuation">{</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">}</span>
    slice2 <span class="token operator">:=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token builtin">int</span><span class="token punctuation">{</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">}</span>
    slice3 <span class="token operator">:=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token builtin">int</span><span class="token punctuation">{</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">}</span>

    fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span>reflect<span class="token punctuation">.</span><span class="token function">DeepEqual</span><span class="token punctuation">(</span>slice1<span class="token punctuation">,</span> slice2<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment">// 输出: true</span>
    fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span>reflect<span class="token punctuation">.</span><span class="token function">DeepEqual</span><span class="token punctuation">(</span>slice1<span class="token punctuation">,</span> slice3<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment">// 输出: false</span>
<span class="token punctuation">}</span>
</code></pre></div><h4 id="映射-map"><a href="#映射-map" class="header-anchor">#</a> 映射(map)</h4> <p>在 Go 语言中，<code>map</code> 是一种引用类型，与切片类似，它们都不能直接使用 <code>==</code> 运算符进行比较。主要原因如下：</p> <ol><li><p><strong>引用类型特性</strong>：</p> <ul><li><code>map</code> 是一种引用类型，它们本身并不存储数据，而是指向底层数据结构的引用。每个 <code>map</code> 变量包含一个指向 <code>map</code> 数据结构的指针。</li></ul></li> <li><p><strong>底层数据结构的影响</strong>：</p> <ul><li>两个不同的 <code>map</code> 变量可能指向相同的底层数据结构（即同一个 <code>map</code> 对象），或者它们可能指向不同的 <code>map</code> 对象，但是这两个对象可能包含相同的键值对。</li></ul></li> <li><p><strong>比较的语义</strong>：</p> <ul><li><code>==</code> 运算符在 Go 中用于比较基本类型数据的值，比较引用类型时，它只会比较两个变量是否引用了相同的对象，而不会比较对象的内容。</li></ul></li></ol> <p>所以，在比较 <code>map</code> 时，需要明确地按照键值对进行比较，而不是简单地比较 <code>map</code> 的引用。如果使用 <code>==</code> 比较两个 <code>map</code>，会报如下错误：</p> <div class="language-go extra-class"><pre class="language-go"><code><span class="token keyword">var</span> map1 <span class="token operator">=</span> <span class="token keyword">map</span><span class="token punctuation">[</span><span class="token builtin">string</span><span class="token punctuation">]</span><span class="token builtin">int</span><span class="token punctuation">{</span><span class="token string">&quot;a&quot;</span><span class="token punctuation">:</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token string">&quot;b&quot;</span><span class="token punctuation">:</span> <span class="token number">2</span><span class="token punctuation">}</span>
<span class="token keyword">var</span> map1 <span class="token operator">=</span> map1
<span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;map等值判断：map1 == map2 =&gt; &quot;</span><span class="token punctuation">,</span> map1 <span class="token operator">==</span> map2<span class="token punctuation">)</span>
<span class="token comment">// invalid operation: map1 == map1 (map can only be compared to nil)</span>
</code></pre></div><h5 id="正确的-map-比较方式"><a href="#正确的-map-比较方式" class="header-anchor">#</a> 正确的 <code>map</code> 比较方式</h5> <p>要比较两个 <code>map</code> 的内容是否相同，需要逐个比较它们的键值对。通常可以使用以下方式之一：</p> <ul><li><p><strong>逐个比较键值对</strong>：</p> <div class="language-go extra-class"><pre class="language-go"><code><span class="token keyword">package</span> main

<span class="token keyword">import</span> <span class="token string">&quot;fmt&quot;</span>

<span class="token keyword">func</span> <span class="token function">equalMaps</span><span class="token punctuation">(</span>map1<span class="token punctuation">,</span> map2 <span class="token keyword">map</span><span class="token punctuation">[</span><span class="token builtin">string</span><span class="token punctuation">]</span><span class="token builtin">int</span><span class="token punctuation">)</span> <span class="token builtin">bool</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token function">len</span><span class="token punctuation">(</span>map1<span class="token punctuation">)</span> <span class="token operator">!=</span> <span class="token function">len</span><span class="token punctuation">(</span>map2<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token boolean">false</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">for</span> k<span class="token punctuation">,</span> v1 <span class="token operator">:=</span> <span class="token keyword">range</span> map1 <span class="token punctuation">{</span>
        <span class="token keyword">if</span> v2<span class="token punctuation">,</span> ok <span class="token operator">:=</span> map2<span class="token punctuation">[</span>k<span class="token punctuation">]</span><span class="token punctuation">;</span> <span class="token operator">!</span>ok <span class="token operator">||</span> v1 <span class="token operator">!=</span> v2 <span class="token punctuation">{</span>
            <span class="token keyword">return</span> <span class="token boolean">false</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">return</span> <span class="token boolean">true</span>
<span class="token punctuation">}</span>

<span class="token keyword">func</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    map1 <span class="token operator">:=</span> <span class="token keyword">map</span><span class="token punctuation">[</span><span class="token builtin">string</span><span class="token punctuation">]</span><span class="token builtin">int</span><span class="token punctuation">{</span><span class="token string">&quot;a&quot;</span><span class="token punctuation">:</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token string">&quot;b&quot;</span><span class="token punctuation">:</span> <span class="token number">2</span><span class="token punctuation">}</span>
    map2 <span class="token operator">:=</span> <span class="token keyword">map</span><span class="token punctuation">[</span><span class="token builtin">string</span><span class="token punctuation">]</span><span class="token builtin">int</span><span class="token punctuation">{</span><span class="token string">&quot;a&quot;</span><span class="token punctuation">:</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token string">&quot;b&quot;</span><span class="token punctuation">:</span> <span class="token number">2</span><span class="token punctuation">}</span>
    map3 <span class="token operator">:=</span> <span class="token keyword">map</span><span class="token punctuation">[</span><span class="token builtin">string</span><span class="token punctuation">]</span><span class="token builtin">int</span><span class="token punctuation">{</span><span class="token string">&quot;a&quot;</span><span class="token punctuation">:</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token string">&quot;b&quot;</span><span class="token punctuation">:</span> <span class="token number">3</span><span class="token punctuation">}</span>

    fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token function">equalMaps</span><span class="token punctuation">(</span>map1<span class="token punctuation">,</span> map2<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment">// 输出: true</span>
    fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token function">equalMaps</span><span class="token punctuation">(</span>map1<span class="token punctuation">,</span> map3<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment">// 输出: false</span>
<span class="token punctuation">}</span>
</code></pre></div></li> <li><p><strong>使用 <code>reflect.DeepEqual</code></strong>：</p></li></ul> <div class="language-go extra-class"><pre class="language-go"><code><span class="token keyword">package</span> main

<span class="token keyword">import</span> <span class="token punctuation">(</span>
    <span class="token string">&quot;fmt&quot;</span>
    <span class="token string">&quot;reflect&quot;</span>
<span class="token punctuation">)</span>

<span class="token keyword">func</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    map1 <span class="token operator">:=</span> <span class="token keyword">map</span><span class="token punctuation">[</span><span class="token builtin">string</span><span class="token punctuation">]</span><span class="token builtin">int</span><span class="token punctuation">{</span><span class="token string">&quot;a&quot;</span><span class="token punctuation">:</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token string">&quot;b&quot;</span><span class="token punctuation">:</span> <span class="token number">2</span><span class="token punctuation">}</span>
    map2 <span class="token operator">:=</span> <span class="token keyword">map</span><span class="token punctuation">[</span><span class="token builtin">string</span><span class="token punctuation">]</span><span class="token builtin">int</span><span class="token punctuation">{</span><span class="token string">&quot;a&quot;</span><span class="token punctuation">:</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token string">&quot;b&quot;</span><span class="token punctuation">:</span> <span class="token number">2</span><span class="token punctuation">}</span>
    map3 <span class="token operator">:=</span> <span class="token keyword">map</span><span class="token punctuation">[</span><span class="token builtin">string</span><span class="token punctuation">]</span><span class="token builtin">int</span><span class="token punctuation">{</span><span class="token string">&quot;a&quot;</span><span class="token punctuation">:</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token string">&quot;b&quot;</span><span class="token punctuation">:</span> <span class="token number">3</span><span class="token punctuation">}</span>

    fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span>reflect<span class="token punctuation">.</span><span class="token function">DeepEqual</span><span class="token punctuation">(</span>map1<span class="token punctuation">,</span> map2<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment">// 输出: true</span>
    fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span>reflect<span class="token punctuation">.</span><span class="token function">DeepEqual</span><span class="token punctuation">(</span>map1<span class="token punctuation">,</span> map3<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment">// 输出: false</span>
<span class="token punctuation">}</span>
</code></pre></div><h4 id="通道-channel"><a href="#通道-channel" class="header-anchor">#</a> 通道(channel)</h4> <p>当使用<code>==</code>运算符比较两个通道时，它会检查两个通道是否引用了相同的通道对象（即底层的数据结构）。</p> <ul><li>如果两个通道变量引用了同一个通道对象，则它们相等，== 运算符会返回 true。</li> <li>如果两个通道变量引用的是不同的通道对象，即使它们可能执行相同的操作，== 运算符会返回 false。</li></ul> <div class="language-go extra-class"><pre class="language-go"><code><span class="token keyword">var</span> ch1 <span class="token operator">=</span> <span class="token function">make</span><span class="token punctuation">(</span><span class="token keyword">chan</span> <span class="token builtin">int</span><span class="token punctuation">)</span>
ch2 <span class="token operator">:=</span> ch1
<span class="token keyword">var</span> ch3 <span class="token operator">=</span> <span class="token function">make</span><span class="token punctuation">(</span><span class="token keyword">chan</span> <span class="token builtin">int</span><span class="token punctuation">)</span>
<span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;channel等值判断：ch1 == ch2 =&gt; &quot;</span><span class="token punctuation">,</span> ch1 <span class="token operator">==</span> ch2<span class="token punctuation">)</span>
<span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;channel等值判断：ch1 == ch3 =&gt; &quot;</span><span class="token punctuation">,</span> ch1 <span class="token operator">==</span> ch3<span class="token punctuation">)</span>
<span class="token comment">// channel等值判断：ch1 == ch2 =&gt;  true</span>
<span class="token comment">// channel等值判断：ch1 == ch3 =&gt;  false</span>
</code></pre></div><h4 id="指针-pointer"><a href="#指针-pointer" class="header-anchor">#</a> 指针(pointer)</h4> <p>当使用<code>==</code>运算符比较两个指针时，它会检查两个指针是否指向同一个内存地址。</p> <ul><li>如果两个指针变量都为 nil，则它们相等，== 运算符会返回 true。</li> <li>如果两个指针变量都不为 nil，并且它们指向相同的内存地址，则它们相等，== 运算符会返回 true。</li> <li>如果两个指针变量都不为 nil，并且它们指向不同的内存地址，则它们不相等，== 运算符会返回 false。</li></ul> <div class="language-go extra-class"><pre class="language-go"><code><span class="token keyword">var</span> p1 <span class="token operator">*</span><span class="token builtin">int</span>
<span class="token keyword">var</span> p2 <span class="token operator">*</span><span class="token builtin">int</span>
<span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;指针等值判断：p1 == p2 =&gt; &quot;</span><span class="token punctuation">,</span> p1 <span class="token operator">==</span> p2<span class="token punctuation">)</span>
<span class="token comment">// 指针等值判断：p1 == p2 =&gt;  true</span>
<span class="token keyword">var</span> x <span class="token operator">=</span> <span class="token number">5</span>
<span class="token keyword">var</span> xp1 <span class="token operator">=</span> <span class="token operator">&amp;</span>x
<span class="token keyword">var</span> xp2 <span class="token operator">=</span> <span class="token operator">&amp;</span>x
<span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;指针等值判断：xp1 == xp2 =&gt; &quot;</span><span class="token punctuation">,</span> xp1 <span class="token operator">==</span> xp2<span class="token punctuation">)</span>
<span class="token comment">// 指针等值判断：xp1 == xp2 =&gt;  true</span>


</code></pre></div><h3 id="接口类型"><a href="#接口类型" class="header-anchor">#</a> 接口类型</h3> <h4 id="接口-interface"><a href="#接口-interface" class="header-anchor">#</a> 接口(interface)</h4> <p>在 Go 语言中，接口类型（interface）的 <code>==</code> 运算符可以用来比较两个接口值。接口的比较包括以下几个方面：</p> <ol><li><p><strong>动态类型</strong>：</p> <ul><li>接口值包含一个动态类型（即接口值存储的具体类型）。</li></ul></li> <li><p><strong>动态值</strong>：</p> <ul><li>接口值还包含一个动态值（即接口值存储的具体值）。</li></ul></li></ol> <h3 id="接口比较规则"><a href="#接口比较规则" class="header-anchor">#</a> 接口比较规则</h3> <ul><li><p><strong>相同类型和相同值</strong>：</p> <ul><li>相同类型相同值，<code>==</code> 运算符返回 <code>true</code>。</li></ul></li> <li><p><strong>不同类型</strong>：</p> <ul><li>不同类型相同值，<code>==</code> 运算符也会返回 <code>false</code>。</li></ul></li> <li><p><strong>不同值</strong>：</p> <ul><li>相同类型不同值，<code>==</code> 运算符也会返回 <code>false</code>。</li></ul></li></ul> <h3 id="示例"><a href="#示例" class="header-anchor">#</a> 示例</h3> <div class="language-go extra-class"><pre class="language-go"><code><span class="token keyword">package</span> main

<span class="token keyword">import</span> <span class="token string">&quot;fmt&quot;</span>

<span class="token keyword">func</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">var</span> a <span class="token keyword">interface</span><span class="token punctuation">{</span><span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token number">42</span>
    <span class="token keyword">var</span> b <span class="token keyword">interface</span><span class="token punctuation">{</span><span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token number">42</span>
    <span class="token keyword">var</span> c <span class="token keyword">interface</span><span class="token punctuation">{</span><span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token string">&quot;42&quot;</span>
    <span class="token keyword">var</span> d <span class="token keyword">interface</span><span class="token punctuation">{</span><span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token boolean">nil</span>
    <span class="token keyword">var</span> e <span class="token keyword">interface</span><span class="token punctuation">{</span><span class="token punctuation">}</span>

    fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span>a <span class="token operator">==</span> b<span class="token punctuation">)</span> <span class="token comment">// 输出: true，因为 a 和 b 的动态类型和动态值都相同</span>
    fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span>a <span class="token operator">==</span> c<span class="token punctuation">)</span> <span class="token comment">// 输出: false，因为 a 和 c 的动态类型不同</span>
    fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span>d <span class="token operator">==</span> e<span class="token punctuation">)</span> <span class="token comment">// 输出: true，因为 d 和 e 都是 nil</span>
    fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span>a <span class="token operator">==</span> d<span class="token punctuation">)</span> <span class="token comment">// 输出: false，因为 a 不为 nil 而 d 为 nil</span>
<span class="token punctuation">}</span>
</code></pre></div><h3 id="注意事项"><a href="#注意事项" class="header-anchor">#</a> 注意事项</h3> <ul><li><p><strong>类型断言</strong>：</p> <ul><li>当进行接口值比较时，如果需要比较接口的具体值，可以使用类型断言来提取具体类型，然后再进行比较。</li></ul></li> <li><p><strong>性能考虑</strong>：</p> <ul><li>虽然接口比较在语法上非常方便，但在性能敏感的场景下，频繁的接口比较可能带来一定的开销，因此需要合理使用。</li></ul></li></ul></div> <footer><!----> <hr> <!----></footer></article> <div class="sticker vuepress-toc"><div class="vuepress-toc-item vuepress-toc-h2 active"><a href="#go中的数据类型" title="go中的数据类型">go中的数据类型</a></div><div class="vuepress-toc-item vuepress-toc-h2"><a href="#类型比较的前提" title="类型比较的前提">类型比较的前提</a></div><div class="vuepress-toc-item vuepress-toc-h2"><a href="#类型的等值比较" title="类型的等值比较">类型的等值比较</a></div><div class="vuepress-toc-item vuepress-toc-h3"><a href="#基本类型" title="基本类型">基本类型</a></div><div class="vuepress-toc-item vuepress-toc-h3"><a href="#复合类型" title="复合类型">复合类型</a></div><div class="vuepress-toc-item vuepress-toc-h3"><a href="#引用类型" title="引用类型">引用类型</a></div><div class="vuepress-toc-item vuepress-toc-h3"><a href="#接口类型" title="接口类型">接口类型</a></div><div class="vuepress-toc-item vuepress-toc-h3"><a href="#接口比较规则" title="接口比较规则">接口比较规则</a></div><div class="vuepress-toc-item vuepress-toc-h3"><a href="#示例" title="示例">示例</a></div><div class="vuepress-toc-item vuepress-toc-h3"><a href="#注意事项" title="注意事项">注意事项</a></div></div></div></div> <footer class="footer" data-v-3d9deeb8><div class="footer-left-wrap" data-v-3d9deeb8><ul class="contact" data-v-3d9deeb8><li class="contact-item" data-v-3d9deeb8><a href="https://github.com/fbbyqsyea" target="_blank" rel="noopener noreferrer" class="nav-link external" data-v-3d9deeb8><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-github" data-v-3d9deeb8><path d="M9 19c-5 1.5-5-2.5-7-3m14 6v-3.87a3.37 3.37 0 0 0-.94-2.61c3.14-.35 6.44-1.54 6.44-7A5.44 5.44 0 0 0 20 4.77 5.07 5.07 0 0 0 19.91 1S18.73.65 16 2.48a13.38 13.38 0 0 0-7 0C6.27.65 5.09 1 5.09 1A5.07 5.07 0 0 0 5 4.77a5.44 5.44 0 0 0-1.5 3.78c0 5.42 3.3 6.61 6.44 7A3.37 3.37 0 0 0 9 18.13V22" data-v-3d9deeb8></path></svg>
          
        </a></li></ul></div> <div class="footer-right-wrap" data-v-3d9deeb8><ul class="copyright" data-v-3d9deeb8><li class="copyright-item" data-v-3d9deeb8>MIT Licensed | Copyright © 2024-fbbyqsyea</li></ul></div></footer></div><div class="global-ui"></div></div>
    <script src="/assets/js/app.20f2d714.js" defer></script><script src="/assets/js/6.86d33cf6.js" defer></script><script src="/assets/js/3.122d5fd9.js" defer></script><script src="/assets/js/60.f82dec03.js" defer></script>
  </body>
</html>
