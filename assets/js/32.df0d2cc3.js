(window.webpackJsonp=window.webpackJsonp||[]).push([[32],{332:function(t,s,a){"use strict";a.r(s);var e=a(5),r=Object(e.a)({},(function(){var t=this,s=t._self._c;return s("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[s("h1",{attrs:{id:"go-workspace简单使用"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#go-workspace简单使用"}},[t._v("#")]),t._v(" go workspace简单使用")]),t._v(" "),s("h2",{attrs:{id:"为什么会有go-workspace"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#为什么会有go-workspace"}},[t._v("#")]),t._v(" 为什么会有go workspace")]),t._v(" "),s("p",[t._v("基于Go Module的开发，代码组织有以下两种方式:")]),t._v(" "),s("ul",[s("li",[t._v("整个项目为一个Module，Module下再拆分为多个功能包")]),t._v(" "),s("li",[t._v("根据不同功能将项目拆分为多个Module")])]),t._v(" "),s("p",[t._v("两种方式各有优缺点，其中:")]),t._v(" "),s("ul",[s("li",[t._v("整个项目为一个Module，各个功能包都在一个Module下，代码变更是实时生效的。但是其中业务代码和功能代码等放在一起，高度耦合。多个项目之间的公共代码不方便共享。")]),t._v(" "),s("li",[t._v("根据不同功能将项目拆分为多个Module，优点是代码之前低耦合，Module之间根据需要相互依赖。缺点是项目依赖的Module改动后，如果用到的改动后的功能就需要先发布依赖Module到代码仓库，然后在项目中更新依赖Module。")])]),t._v(" "),s("p",[t._v("针对上面所说的将项目拆分成多个Module，依赖Module需要先发布再更新的问题，有以下两个解决方案:")]),t._v(" "),s("ul",[s("li",[t._v("使用Go Module中的replace指令，在项目中将依赖替换为本地Module")]),t._v(" "),s("li",[t._v("使用go workspace工作区模式，使用统一的go.work来维护依赖映射")])]),t._v(" "),s("div",{staticClass:"language-go extra-class"},[s("pre",{pre:!0,attrs:{class:"language-go"}},[s("code",[t._v("\nmodule github"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("com"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("xxxxxxx"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("gin"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v("framework"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v("layout\n\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("go")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("1.19")]),t._v("\n\nrequire "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("\n\tgithub"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("com"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("xxxxxxx"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("gin"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v("framework"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v("core v0"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("0.1")]),t._v("\n\tgithub"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("com"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("xxxxxxx"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("go")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v("utils v0"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("0.0")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("20221028065316")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v("8abebfd58706\n\tgithub"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("com"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("dgrijalva"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("jwt"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("go")]),t._v(" v3"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("2.0")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("+")]),t._v("incompatible\n\tgithub"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("com"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("gin"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v("gonic"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("gin v1"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("8.1")]),t._v("\n\tgithub"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("com"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("swaggo"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("files v0"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("0.0")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("20220728132757")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v("551d4a08d97a\n\tgithub"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("com"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("swaggo"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("gin"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v("swagger v1"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("5.3")]),t._v("\n\tgithub"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("com"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("swaggo"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("swag v1"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("8.7")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n\nreplace github"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("com"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("xxxxxxx"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("gin"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v("framework"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v("core "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("gin"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v("framework"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v("core v0"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("0.1")]),t._v("\n")])])]),s("ol",[s("li",[t._v("replace在开发项目的go.mod文件中将依赖Module使用replace指令替换为本地项目。优点是不需要每次都发布和更新Module，缺点是在每次发布的时候都需要注释掉本地的replace指令。")]),t._v(" "),s("li",[t._v("go workspace工作区模式，是在项目的同级目录创建go.work文件，来使用go.work文件来统一维护当前目录下所有Module之间的依赖，同时也不需要将go.work纳入版本管理，也不需要每次都去删掉或者注释掉相关内容。具体如何使用go workspace,请参照下面示例。")])]),t._v(" "),s("h2",{attrs:{id:"go-workspace的用法"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#go-workspace的用法"}},[t._v("#")]),t._v(" go workspace的用法")]),t._v(" "),s("p",[t._v("我们以的xxxxxxx框架为例，为了代码之间低耦合，我们将框架拆封为三个Module。")]),t._v(" "),s("ul",[s("li",[s("a",{attrs:{href:"https://github.com/xxxxxxx/gin-framework-core",target:"_blank",rel:"noopener noreferrer"}},[t._v("gin-framework-core"),s("OutboundLink")],1),t._v(" Module, 基于gin封装的web框架核心，包括加载配置服务、日志服务、数据库操作和redis换成操作等，依赖于函数库go-utils。")]),t._v(" "),s("li",[s("a",{attrs:{href:"https://github.com/xxxxxxx/go-utils",target:"_blank",rel:"noopener noreferrer"}},[t._v("go-utils"),s("OutboundLink")],1),t._v(" Module, go公共函数库，公共函数都放在这个Module下面，包括md5、http request、nodelog等封装。")]),t._v(" "),s("li",[s("a",{attrs:{href:"https://github.com/xxxxxxx/gin-framework-layout",target:"_blank",rel:"noopener noreferrer"}},[t._v("gin-framework-layout"),s("OutboundLink")],1),t._v(" Module, 基于gin框架封装的业务开发模版，其内部实现了mvc+router服务，依赖于gin-framework-core和go-utils Module。")])]),t._v(" "),s("p",[t._v("我们在开发过程中需要同时改到上面三个Module，同时我们希望改动能够实时生效、发布代码到gitea时也不改动任何配置。具体可以这样做:")]),t._v(" "),s("h6",{attrs:{id:"新建go代码目录"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#新建go代码目录"}},[t._v("#")]),t._v(" 新建go代码目录")]),t._v(" "),s("div",{staticClass:"language-bash extra-class"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[t._v("root@huge-elk:~"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# mkdir ~/webdata/go -p")]),t._v("\nroot@huge-elk:~"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# cd ~/webdata/go/")]),t._v("\nroot@huge-elk:~/webdata/go"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# ")]),t._v("\n")])])]),s("h6",{attrs:{id:"拉取gin-framework-core-gin-framework-layout-go-utils三个仓库"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#拉取gin-framework-core-gin-framework-layout-go-utils三个仓库"}},[t._v("#")]),t._v(" 拉取gin-framework-core,gin-framework-layout,go-utils三个仓库")]),t._v(" "),s("div",{staticClass:"language-bash extra-class"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[t._v("root@huge-elk:~/webdata/go"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# git clone git@github.com:xxxxxxx/gin-framework-core.git")]),t._v("\nCloning into "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'gin-framework-core'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("..")]),t._v(".\nThe authenticity of "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("host")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'github.com (192.168.74.97)'")]),t._v(" can"),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'t be established.\nRSA key fingerprint is SHA256:oltXuIRprs+uMUAwCCYY3qiLjQDmE0lP4eINNqxB1sw.\nThis key is not known by any other names\nAre you sure you want to continue connecting (yes/no/[fingerprint])? yes\nWarning: Permanently added '")]),t._v("github.com"),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("' (RSA) to the list of known hosts.\nremote: Enumerating objects: 40, done.\nremote: Counting objects: 100% (40/40), done.\nremote: Compressing objects: 100% (40/40), done.\nremote: Total 40 (delta 14), reused 0 (delta 0)\nReceiving objects: 100% (40/40), 34.46 KiB | 1.08 MiB/s, done.\nResolving deltas: 100% (14/14), done.\nroot@huge-elk:~/webdata/go# git clone git@github.com:xxxxxxx/gin-framework-layout.git\nCloning into '")]),t._v("gin-framework-layout"),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'...\nremote: Enumerating objects: 35, done.\nremote: Counting objects: 100% (35/35), done.\nremote: Compressing objects: 100% (30/30), done.\nremote: Total 35 (delta 8), reused 0 (delta 0)\nReceiving objects: 100% (35/35), 32.98 KiB | 2.20 MiB/s, done.\nResolving deltas: 100% (8/8), done.\nroot@huge-elk:~/webdata/go# git clone git@github.com:xxxxxxx/go-utils.git\nCloning into '")]),t._v("go-utils'"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("..")]),t._v(".\nremote: Enumerating objects: "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("16")]),t._v(", done.\nremote: Counting objects: "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("100")]),t._v("% "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("16")]),t._v("/16"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(", done.\nremote: Compressing objects: "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("100")]),t._v("% "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("11")]),t._v("/11"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(", done.\nremote: Total "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("16")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("delta "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(", reused "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("delta "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\nReceiving objects: "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("100")]),t._v("% "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("16")]),t._v("/16"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(", "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("4.27")]),t._v(" KiB "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("874.00")]),t._v(" KiB/s, done.\nroot@huge-elk:~/webdata/go"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# ll")]),t._v("\ntotal "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("20")]),t._v("\ndrwxr-xr-x "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("5")]),t._v(" root root "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("4096")]),t._v(" Nov  "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("2")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("10")]),t._v(":19 ./\ndrwxr-xr-x "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("3")]),t._v(" root root "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("4096")]),t._v(" Nov  "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("2")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("10")]),t._v(":15 "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("..")]),t._v("/\ndrwxr-xr-x "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("5")]),t._v(" root root "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("4096")]),t._v(" Nov  "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("2")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("10")]),t._v(":19 gin-framework-core/\ndrwxr-xr-x "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("7")]),t._v(" root root "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("4096")]),t._v(" Nov  "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("2")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("10")]),t._v(":19 gin-framework-layout/\ndrwxr-xr-x "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("7")]),t._v(" root root "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("4096")]),t._v(" Nov  "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("2")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("10")]),t._v(":19 go-utils/\nroot@huge-elk:~/webdata/go"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# ")]),t._v("\n")])])]),s("h6",{attrs:{id:"使用go-work-init来创建workspace"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#使用go-work-init来创建workspace"}},[t._v("#")]),t._v(" 使用go work init来创建workspace")]),t._v(" "),s("div",{staticClass:"language-bash extra-class"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# moddirs是Go Module所在的本地目录。如果有多个Go Module，就用空格分开。如果go work init后面没有参数，会创建一个空的workspace。")]),t._v("\ngo work init "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("moddirs"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("## 初始化workspace")]),t._v("\nroot@huge-elk:~/webdata/go"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# go work init ./gin-framework-layout")]),t._v("\nroot@huge-elk:~/webdata/go"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# ll")]),t._v("\ntotal "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("24")]),t._v("\ndrwxr-xr-x "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("5")]),t._v(" root root "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("4096")]),t._v(" Nov  "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("2")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("10")]),t._v(":22 ./\ndrwxr-xr-x "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("3")]),t._v(" root root "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("4096")]),t._v(" Nov  "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("2")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("10")]),t._v(":15 "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("..")]),t._v("/\ndrwxr-xr-x "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("5")]),t._v(" root root "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("4096")]),t._v(" Nov  "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("2")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("10")]),t._v(":19 gin-framework-core/\ndrwxr-xr-x "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("7")]),t._v(" root root "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("4096")]),t._v(" Nov  "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("2")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("10")]),t._v(":19 gin-framework-layout/\ndrwxr-xr-x "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("7")]),t._v(" root root "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("4096")]),t._v(" Nov  "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("2")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("10")]),t._v(":19 go-utils/\n-rw-r--r-- "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),t._v(" root root   "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("36")]),t._v(" Nov  "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("2")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("10")]),t._v(":22 go.work\nroot@huge-elk:~/webdata/go"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# ")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("## 查看workspace内容")]),t._v("\nroot@huge-elk:~/webdata/go"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# cat go.work ")]),t._v("\ngo "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("1.18")]),t._v("\n\nuse ./gin-framework-layout\nroot@huge-elk:~/webdata/go"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# ")]),t._v("\n")])])]),s("h6",{attrs:{id:"使用go-work-use来添加依赖"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#使用go-work-use来添加依赖"}},[t._v("#")]),t._v(" 使用go work use来添加依赖")]),t._v(" "),s("div",{staticClass:"language-bash extra-class"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 如果要给workspace新增Go Module，可以使用如下命令.或者手动编辑go work文件。如果带有-r参数，会递归查找-r后面的路径参数下的所有子目录，把所有包含go.mod文件的子目录都添加到go work文件中。")]),t._v("\ngo work use "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("-r"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" moddir\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("### 注意: 如果某个Go Module的目录已经被加到go.work里了，后面该目录没有go.mod文件了或者该目录被删除了，那对该目录再次执行go work use命令，该目录的use指令会从go.work文件里自动移除。(注意：自动移除要从Go 1.18正式版本才会生效，Go 1.18beta1版本有bug，自动删除不会生效)")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 添加gin-framework-core,go-utils依赖")]),t._v("\nroot@huge-elk:~/webdata/go"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# go work use ./gin-framework-core ./go-utils/")]),t._v("\nroot@huge-elk:~/webdata/go"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# cat go.work ")]),t._v("\ngo "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("1.18")]),t._v("\n\nuse "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("\n        ./gin-framework-core\n        ./gin-framework-layout\n        ./go-utils\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])])]),s("p",[t._v("这样我们就可以修改go目录下的三个module中的任意一个，代码是实时生效的。而且对于代码发布流程不会有任何影响。")])])}),[],!1,null,null,null);s.default=r.exports}}]);