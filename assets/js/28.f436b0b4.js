(window.webpackJsonp=window.webpackJsonp||[]).push([[28],{337:function(a,s,t){"use strict";t.r(s);var n=t(5),e=Object(n.a)({},(function(){var a=this,s=a._self._c;return s("ContentSlotsDistributor",{attrs:{"slot-key":a.$parent.slotKey}},[s("h2",{attrs:{id:"k8s-containerd容器驱动安装"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#k8s-containerd容器驱动安装"}},[a._v("#")]),a._v(" k8s containerd容器驱动安装")]),a._v(" "),s("h4",{attrs:{id:"安装yum-utils工具"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#安装yum-utils工具"}},[a._v("#")]),a._v(" 安装yum-utils工具")]),a._v(" "),s("div",{staticClass:"language-bash extra-class"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[a._v("$ "),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("sudo")]),a._v(" yum "),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("install")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-y")]),a._v(" yum-utils\n")])])]),s("h4",{attrs:{id:"添加阿里云docker镜像仓库"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#添加阿里云docker镜像仓库"}},[a._v("#")]),a._v(" 添加阿里云docker镜像仓库")]),a._v(" "),s("div",{staticClass:"language-bash extra-class"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[a._v("$ "),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("sudo")]),a._v(" yum-config-manager "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("\\")]),a._v("\n    --add-repo "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("\\")]),a._v("\n    http://mirrors.aliyun.com/docker-ce/linux/centos/docker-ce.repo \n")])])]),s("h4",{attrs:{id:"安装containerd"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#安装containerd"}},[a._v("#")]),a._v(" 安装containerd")]),a._v(" "),s("div",{staticClass:"language-bash extra-class"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[a._v("$ "),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("sudo")]),a._v(" yum "),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("install")]),a._v(" containerd "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-y")]),a._v("\n")])])]),s("h4",{attrs:{id:"初始化containerd配置信息"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#初始化containerd配置信息"}},[a._v("#")]),a._v(" 初始化containerd配置信息")]),a._v(" "),s("div",{staticClass:"language-bash extra-class"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[a._v("$ "),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("sudo")]),a._v(" madir /etc/containerd\n$ "),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("sudo")]),a._v(" containerd config default "),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v(">")]),a._v(" /etc/containerd/config.toml\n")])])]),s("h4",{attrs:{id:"修改containerd-sand-box-和-cgroup"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#修改containerd-sand-box-和-cgroup"}},[a._v("#")]),a._v(" 修改containerd sand_box 和 Cgroup")]),a._v(" "),s("div",{staticClass:"language-bash extra-class"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[a._v("$ "),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("vim")]),a._v(" /etc/containerd/config.toml\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# 修改sand_box")]),a._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# 查找sand_image 将k8s.gcr.io/pause:3.6 替换成阿里源 registry.aliyuncs.com/google_containers/pause:3.6")]),a._v("\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# 修改Cgroup")]),a._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# 查找SystemdCgroup 将false 改为 true")]),a._v("\n")])])]),s("h4",{attrs:{id:"启动containerd"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#启动containerd"}},[a._v("#")]),a._v(" 启动containerd")]),a._v(" "),s("div",{staticClass:"language-bash extra-class"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[a._v("$ "),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("sudo")]),a._v(" systemctl daemon-reload\n$ "),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("sudo")]),a._v(" systemctl "),s("span",{pre:!0,attrs:{class:"token builtin class-name"}},[a._v("enable")]),a._v(" containerd\n$ "),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("sudo")]),a._v(" systemctl start containerd\n")])])])])}),[],!1,null,null,null);s.default=e.exports}}]);