(window.webpackJsonp=window.webpackJsonp||[]).push([[78],{386:function(t,e,a){"use strict";a.r(e);var s=a(5),v=Object(s.a)({},(function(){var t=this,e=t._self._c;return e("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[e("h1",{attrs:{id:"deployment-vs-statefulset"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#deployment-vs-statefulset"}},[t._v("#")]),t._v(" Deployment VS StatefulSet")]),t._v(" "),e("p",[t._v("在K8s中，"),e("code",[t._v("Deployment")]),t._v("和"),e("code",[t._v("StatefulSet")]),t._v("是两种常用的控制器（Controller），用于管理Pod的生命周期和部署方式。尽管它们的目标都是运行和管理一组Pod，但两者的使用场景和特性存在着显著的差异。一下是他们主要的区别和使用场景分析。")]),t._v(" "),e("h2",{attrs:{id:"核心概念"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#核心概念"}},[t._v("#")]),t._v(" 核心概念")]),t._v(" "),e("h3",{attrs:{id:"deployment"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#deployment"}},[t._v("#")]),t._v(" Deployment：")]),t._v(" "),e("ul",[e("li",[t._v("主要用于管理无状态应用")]),t._v(" "),e("li",[t._v("提供声明式的更新机制，支持回滚更新和回滚等操作。")]),t._v(" "),e("li",[t._v("每个pod是完全对等的，没有固定的标识。")])]),t._v(" "),e("h3",{attrs:{id:"statefulset"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#statefulset"}},[t._v("#")]),t._v(" StatefulSet：")]),t._v(" "),e("ul",[e("li",[t._v("主要用于管理有状态应用")]),t._v(" "),e("li",[t._v("确保每个pod都有一个唯一的标识（通过稳定的网络ID和持计划存储）")]),t._v(" "),e("li",[t._v("支持有序部署、扩展和删除")])]),t._v(" "),e("h2",{attrs:{id:"使用场景"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#使用场景"}},[t._v("#")]),t._v(" 使用场景")]),t._v(" "),e("h3",{attrs:{id:"deployment-2"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#deployment-2"}},[t._v("#")]),t._v(" Deployment：")]),t._v(" "),e("ul",[e("li",[t._v("适用于无状态的服务，例如web、api网关等。")]),t._v(" "),e("li",[t._v("不需要为每个实例分配独立的存储和身份标识。")]),t._v(" "),e("li",[t._v("示例：nginx、Spring Boot应用等。")])]),t._v(" "),e("h3",{attrs:{id:"statefulset-2"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#statefulset-2"}},[t._v("#")]),t._v(" StatefulSet：")]),t._v(" "),e("ul",[e("li",[t._v("适用于有状态服务，例如数据库、分部署存储系统等。")]),t._v(" "),e("li",[t._v("需要为每个实例配置独立的存储，并确保pod的唯一性和顺序性。")]),t._v(" "),e("li",[t._v("示例：mysql、es等。")])]),t._v(" "),e("h2",{attrs:{id:"pod的标识和稳定性"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#pod的标识和稳定性"}},[t._v("#")]),t._v(" Pod的标识和稳定性：")]),t._v(" "),e("h3",{attrs:{id:"deployment-3"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#deployment-3"}},[t._v("#")]),t._v(" Deployment：")]),t._v(" "),e("ul",[e("li",[t._v("pod是动态生成的，每次重新调度后可能会获取到衣蛾新的名称和ip地址")]),t._v(" "),e("li",[t._v("不保证pod身份的稳定性，pod的网络地址和存储都是临时的。")])]),t._v(" "),e("h3",{attrs:{id:"statefulset-3"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#statefulset-3"}},[t._v("#")]),t._v(" StatefulSet：")]),t._v(" "),e("ul",[e("li",[t._v("每个pod都有一个稳定的、基于索引的名称（如：myapp-0、myapp-1）")]),t._v(" "),e("li",[t._v("每个pod的网络标识和持计划存储是稳定的，即使pod被重新调度了，其名称、主机名和存储卷任然保持不变。")])]),t._v(" "),e("h2",{attrs:{id:"存储管理"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#存储管理"}},[t._v("#")]),t._v(" 存储管理")]),t._v(" "),e("h3",{attrs:{id:"deployment-4"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#deployment-4"}},[t._v("#")]),t._v(" Deployment：")]),t._v(" "),e("ul",[e("li",[t._v("通常使用共享存储（如：nas、云存储）或者不使用永久存储。")]),t._v(" "),e("li",[t._v("pod之间没有独立的存储需求。")])]),t._v(" "),e("h3",{attrs:{id:"statefulset-4"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#statefulset-4"}},[t._v("#")]),t._v(" StatefulSet：")]),t._v(" "),e("ul",[e("li",[t._v("每个pod都会绑定一个独立的PV，确保数据的持久化和隔离。")]),t._v(" "),e("li",[t._v("支持动态创建和绑定存储卷。")])])])}),[],!1,null,null,null);e.default=v.exports}}]);