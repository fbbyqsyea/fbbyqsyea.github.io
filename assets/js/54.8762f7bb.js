(window.webpackJsonp=window.webpackJsonp||[]).push([[54],{366:function(s,t,a){"use strict";a.r(t);var e=a(5),n=Object(e.a)({},(function(){var s=this,t=s._self._c;return t("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[t("h1",{attrs:{id:"ubuntu系统扩充根目录"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#ubuntu系统扩充根目录"}},[s._v("#")]),s._v(" ubuntu系统扩充根目录")]),s._v(" "),t("h2",{attrs:{id:"背景"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#背景"}},[s._v("#")]),s._v(" 背景")]),s._v(" "),t("p",[s._v("最近在给自己的服务器安装ubuntu server系统的时候，所有的选项都是用了安装引导的推荐选项，导致只分配了100G的磁盘空间，而磁盘剩余空间为1.8T。")]),s._v(" "),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[s._v("$ ubuntu@ubuntu:~$ lsblk\nNAME                      MAJ:MIN RM  SIZE RO TYPE MOUNTPOINTS\nnvme0n1                   "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("259")]),s._v(":0    "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("  "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(".8T  "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v(" disk \n├─nvme0n1p1               "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("259")]),s._v(":1    "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("    1G  "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v(" part /boot/efi\n├─nvme0n1p2               "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("259")]),s._v(":2    "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("    2G  "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v(" part /boot\n└─nvme0n1p3               "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("259")]),s._v(":3    "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("  "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(".8T  "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v(" part \n  └─ubuntu--vg-ubuntu--lv "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("253")]),s._v(":0    "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("  100G  "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v(" lvm  /\n")])])]),t("p",[s._v("从上面的命令可以看出磁盘"),t("code",[s._v("nvme0n1")]),s._v("总共有"),t("strong",[s._v("1.8T")]),s._v("。被分为三个分区，分别是"),t("code",[s._v("nvme0n1p1")]),s._v("，"),t("code",[s._v("nvme0n1p2")]),s._v("，"),t("code",[s._v("nvme0n1p3")]),s._v("。其中，")]),s._v(" "),t("ul",[t("li",[t("code",[s._v("nvme0n1p1")]),s._v("大小为"),t("strong",[s._v("1G")]),s._v("，被挂载到"),t("code",[s._v("/boot/efi")]),s._v("，用于存储 UEFI（统一固件接口）引导相关的文件。")]),s._v(" "),t("li",[t("code",[s._v("nvme0n1p2")]),s._v("大小为"),t("strong",[s._v("2G")]),s._v("，被挂载到"),t("code",[s._v("/boot")]),s._v("， 用于存储操作系统引导所需的文件，包括内核文件、引导加载器、引导配置文件等。")]),s._v(" "),t("li",[t("code",[s._v("nvme0n1p3")]),s._v("大小为"),t("strong",[s._v("1.8T")]),s._v("，在"),t("code",[s._v("nvme0n1p3")]),s._v("分区上创建了100G大小的逻辑卷"),t("code",[s._v("ubuntu--vg-ubuntu--lv")]),s._v("，并挂载到了系统根目录"),t("code",[s._v("/")])])]),s._v(" "),t("p",[s._v("现在，我想要将"),t("code",[s._v("nvme0n1p3")]),s._v("分区全部分配到逻辑卷"),t("code",[s._v("ubuntu--vg-ubuntu--lv")]),s._v("，我该如何操作呢？")]),s._v(" "),t("h2",{attrs:{id:"操作"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#操作"}},[s._v("#")]),s._v(" 操作")]),s._v(" "),t("p",[s._v("对于上面的问题，具体的操作步骤如下：")]),s._v(" "),t("h3",{attrs:{id:"备份数据"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#备份数据"}},[s._v("#")]),s._v(" 备份数据")]),s._v(" "),t("p",[s._v("在进行任何磁盘操作之前，务必备份您的重要数据。这可以防止意外数据丢失。")]),s._v(" "),t("h3",{attrs:{id:"卸载挂载"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#卸载挂载"}},[s._v("#")]),s._v(" 卸载挂载")]),s._v(" "),t("p",[s._v("如果nvme0n1p3当前已经挂载，请先卸载它。可以使用以下命令卸载：")]),s._v(" "),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[s._v("$ "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("sudo")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("umount")]),s._v(" /dev/nvme0n1p3\n")])])]),t("h3",{attrs:{id:"调整逻辑卷大小"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#调整逻辑卷大小"}},[s._v("#")]),s._v(" 调整逻辑卷大小")]),s._v(" "),t("p",[s._v("使用lvresize命令来调整ubuntu--vg-ubuntu--lv的大小。您可以使用下面的命令将其调整为使用所有可用空间：")]),s._v(" "),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[s._v("$ "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("sudo")]),s._v(" lvresize "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-l")]),s._v(" +100%FREE /dev/ubuntu-vg/ubuntu-lv\n")])])]),t("h3",{attrs:{id:"文件系统调整"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#文件系统调整"}},[s._v("#")]),s._v(" 文件系统调整")]),s._v(" "),t("p",[s._v("调整逻辑卷大小后，您还需要调整文件系统大小，以便它可以利用新增的空间。如果是ext4文件系统，可以使用resize2fs命令：")]),s._v(" "),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[s._v("$ "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("sudo")]),s._v(" resize2fs /dev/ubuntu-vg/ubuntu-lv\n")])])]),t("h3",{attrs:{id:"重新挂载"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#重新挂载"}},[s._v("#")]),s._v(" 重新挂载")]),s._v(" "),t("p",[s._v("调整大小后，您可以将逻辑卷重新挂载回所需的位置：")]),s._v(" "),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[t("span",{pre:!0,attrs:{class:"token function"}},[s._v("sudo")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("mount")]),s._v(" /dev/ubuntu-vg/ubuntu-lv /\n")])])])])}),[],!1,null,null,null);t.default=n.exports}}]);