(window.webpackJsonp=window.webpackJsonp||[]).push([[28],{332:function(t,s,a){"use strict";a.r(s);var n=a(5),e=Object(n.a)({},(function(){var t=this,s=t._self._c;return s("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[s("h1",{attrs:{id:"gin中使用swagger"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#gin中使用swagger"}},[t._v("#")]),t._v(" gin中使用swagger")]),t._v(" "),s("h2",{attrs:{id:"安装"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#安装"}},[t._v("#")]),t._v(" 安装")]),t._v(" "),s("div",{staticClass:"language-shell extra-class"},[s("pre",{pre:!0,attrs:{class:"language-shell"}},[s("code",[s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("## 使用如下命令安装swag命令")]),t._v("\n➜  go go "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("install")]),t._v(" github.com/swaggo/swag/cmd/swag@latest\ngo: downloading github.com/ghodss/yaml v1.0.0\ngo: downloading github.com/urfave/cli/v2 v2.3.0\ngo: downloading golang.org/x/net v0.0.0-20220722155237-a158d28d115b\ngo: downloading golang.org/x/text v0.3.7\ngo: downloading golang.org/x/sys v0.0.0-20220722155257-8c9f86f7a55f\ngo: downloading github.com/cpuguy83/go-md2man/v2 v2.0.0-20190314233015-f79a8a8ca69d\ngo: downloading github.com/russross/blackfriday/v2 v2.0.1\ngo: downloading github.com/shurcooL/sanitized_anchor_name v1.0.0\n➜  go\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("## 查看是否安装成功")]),t._v("\n➜  go swag "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[t._v("-v")]),t._v("     \nswag version v1.8.7\n\n")])])]),s("h2",{attrs:{id:"注释"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#注释"}},[t._v("#")]),t._v(" 注释")]),t._v(" "),s("p",[t._v("给代码添加注释，注释主要分为两类，一类是全局注释信息，一般放在入口函数main上。另一类是api注释信息，放在每个每个api处理函数上面")]),t._v(" "),s("h4",{attrs:{id:"全局注释"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#全局注释"}},[t._v("#")]),t._v(" 全局注释")]),t._v(" "),s("h5",{attrs:{id:"示例"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#示例"}},[t._v("#")]),t._v(" 示例")]),t._v(" "),s("div",{staticClass:"language-go extra-class"},[s("pre",{pre:!0,attrs:{class:"language-go"}},[s("code",[s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// @Title       gin framework layout")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// @Version     0.0.1")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// @Description gin framework layout")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// @host localhost:8888")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// @securityDefinitions.apikey Authorization")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// @in                         header")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// @name                       Authorization")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// @description                api request authorization")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("func")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("main")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n\tcore"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("New")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("ListenAndServe")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("router"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("RegisterRoutersFunc")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n")])])]),s("h5",{attrs:{id:"说明"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#说明"}},[t._v("#")]),t._v(" 说明")]),t._v(" "),s("table",[s("thead",[s("tr",[s("th",[t._v("注释")]),t._v(" "),s("th",[t._v("说明")])])]),t._v(" "),s("tbody",[s("tr",[s("td",[t._v("Title")]),t._v(" "),s("td",[t._v("应用标题")])]),t._v(" "),s("tr",[s("td",[t._v("Version")]),t._v(" "),s("td",[t._v("应用版本")])]),t._v(" "),s("tr",[s("td",[t._v("Description")]),t._v(" "),s("td",[t._v("应用描述")])]),t._v(" "),s("tr",[s("td",[t._v("TermsOfService")]),t._v(" "),s("td",[t._v("服务条款")])]),t._v(" "),s("tr",[s("td",[t._v("Contact.name")]),t._v(" "),s("td",[t._v("联系名称")])]),t._v(" "),s("tr",[s("td",[t._v("Contact.url")]),t._v(" "),s("td",[t._v("联系url")])]),t._v(" "),s("tr",[s("td",[t._v("Contact.email")]),t._v(" "),s("td",[t._v("联系email")])]),t._v(" "),s("tr",[s("td",[t._v("License.name")]),t._v(" "),s("td",[t._v("协议名称")])]),t._v(" "),s("tr",[s("td",[t._v("License.url")]),t._v(" "),s("td",[t._v("协议地址")])]),t._v(" "),s("tr",[s("td",[t._v("Host")]),t._v(" "),s("td",[t._v("服务host")])]),t._v(" "),s("tr",[s("td",[t._v("BasePath")]),t._v(" "),s("td",[t._v("基础path")])])])]),t._v(" "),s("h6",{attrs:{id:"文档"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#文档"}},[t._v("#")]),t._v(" 文档")]),t._v(" "),s("p",[s("a",{attrs:{href:"https://swaggo.github.io/swaggo.io/declarative_comments_format/general_api_info.html",target:"_blank",rel:"noopener noreferrer"}},[t._v("General API Info"),s("OutboundLink")],1)]),t._v(" "),s("h4",{attrs:{id:"api注释"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#api注释"}},[t._v("#")]),t._v(" Api注释")]),t._v(" "),s("h5",{attrs:{id:"示例-2"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#示例-2"}},[t._v("#")]),t._v(" 示例")]),t._v(" "),s("div",{staticClass:"language-go extra-class"},[s("pre",{pre:!0,attrs:{class:"language-go"}},[s("code",[t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// @Summary     登录")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// @Description 登录接口")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// @Tags        用户")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// @Accept      json")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// @Produce     json")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v('// @Param       data body     UserLoginRequest true "登录凭证"')]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// @Response    200  {object} global.Response{data=UserLoginResponseData}")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// @Router      /api/user/login  [post]")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("func")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("u "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("*")]),t._v("UserController"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("Login")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("c "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("*")]),t._v("gin"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("Context"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n\t"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("var")]),t._v(" req UserLoginRequest\n\t"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),t._v(" u"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("ShouldBindJSON")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("c"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("&")]),t._v("req"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n\t\tu"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("JSON")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("c"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" u"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("Svc"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("Login")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("&")]),t._v("req"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n\t"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// @Summary     退出登录")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// @Description 退出登录接口")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// @Tags        用户")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// @Accept      json")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// @Produce     json")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// @Security    Authorization")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// @Response    200 {object} global.Response{}")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// @Router      /api/user/logout  [get]")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("func")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("u "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("*")]),t._v("UserController"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("Logout")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("c "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("*")]),t._v("gin"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("Context"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n\tu"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("JSON")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("c"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" u"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("Svc"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("Logout")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("c"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("GetUint64")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"Id"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// @Summary     当前登录信息")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// @Description 获取登录信息接口")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// @Tags        用户")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// @Accept      json")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// @Produce     json")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// @Security    Authorization")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// @Response    200 {object} global.Response{data=UserCurrentResponseData}")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// @Router      /api/user/current  [get]")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("func")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("u "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("*")]),t._v("UserController"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("Current")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("c "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("*")]),t._v("gin"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("Context"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n\tu"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("JSON")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("c"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" u"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("Svc"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("Current")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("c"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("GetUint64")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"Id"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" c"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("GetBool")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"RefreshAuthorization"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// @Summary     修改密码")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// @Description 修改密码接口")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// @Tags        用户")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// @Accept      json")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// @Produce     json")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// @Security    Authorization")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v('// @Param       data body     ChangePasswordRequest true "修改密码数据"')]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// @Response    200  {object} global.Response{data=global.UpdateResponseData}")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// @Router      /api/user/changePassword  [post]")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("func")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("u "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("*")]),t._v("UserController"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("ChangePassword")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("c "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("*")]),t._v("gin"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("Context"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n\treq "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("&")]),t._v("ChangePasswordRequest"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\t"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),t._v(" u"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("ShouldBindJSON")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("c"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" req"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n\t\treq"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("Id "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" c"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("GetUint64")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"Id"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n\t\tu"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("JSON")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("c"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" u"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("Svc"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("ChangePassword")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("req"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n\t"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// @Summary     用户信息")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// @Description 用户信息接口")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// @Tags        用户")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// @Accept      json")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// @Produce     json")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// @Security    Authorization")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v('// @param       id  query    uint64 true "id"')]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// @Response    200 {object} global.Response{data=UserData}")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// @Router      /api/user  [get]")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("func")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("u "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("*")]),t._v("UserController"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("Get")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("c "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("*")]),t._v("gin"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("Context"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n\tu"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("Controller"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("Get")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("c"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("&")]),t._v("global"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("GetRequest"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("&")]),t._v("UserData"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("false")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// @Summary     用户列表")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// @Description 用户列表接口")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// @Tags        用户")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// @Accept      json")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// @Produce     json")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// @Security    Authorization")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v('// @param       account  query    string false "账号"')]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v('// @param       username query    string false "姓名"')]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v('// @param       role     query    string false "角色"')]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v('// @param       status   query    int    false "状态"')]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v('// @param       current  query    int    true  "当前页数"')]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v('// @param       pageSize query    int    true  "页数量"')]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// @Response    200      {object} global.Response{data=[]UserData}")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// @Router      /api/user/list  [get]")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("func")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("u "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("*")]),t._v("UserController"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("List")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("c "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("*")]),t._v("gin"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("Context"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n\treq "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("&")]),t._v("UserListRequest"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\t"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),t._v(" u"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("ShouldBindQuery")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("c"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" req"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n\t\tu"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("JSON")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("c"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" u"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("Svc"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("List")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("req"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("&")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("UserData"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("false")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n\t"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// @Summary     新增用户")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// @Description 新增用户接口")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// @Tags        用户")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// @Accept      json")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// @Produce     json")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// @Security    Authorization")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v('// @Param       data body     UserInsertRequest true "新增用户信息"')]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// @Response    200  {object} global.Response{data=global.InsertResponseData}")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// @Router      /api/user  [post]")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("func")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("u "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("*")]),t._v("UserController"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("Insert")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("c "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("*")]),t._v("gin"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("Context"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n\treq "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("&")]),t._v("UserInsertRequest"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\tu"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("CreatedBy")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("c"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" req"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n\t"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),t._v(" u"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("ShouldBindJSON")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("c"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" req"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n\t\tu"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("JSON")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("c"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" u"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("Svc"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("Insert")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("req"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n\t"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// @Summary     更新用户")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// @Description 更新用户接口")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// @Tags        用户")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// @Accept      json")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// @Produce     json")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// @Security    Authorization")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v('// @Param       data body     UserUpdateRequest true "更新用户信息"')]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// @Response    200  {object} global.Response{data=global.UpdateResponseData}")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// @Router      /api/user  [put]")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("func")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("u "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("*")]),t._v("UserController"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("Update")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("c "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("*")]),t._v("gin"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("Context"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n\tu"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("Controller"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("Update")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("c"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("&")]),t._v("UserUpdateRequest"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// @Summary     删除用户")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// @Description 删除用户接口")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// @Tags        用户")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// @Accept      json")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// @Produce     json")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// @Security    Authorization")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v('// @Param       data body     global.RemovesRequest true "删除用户id"')]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// @Response    200  {object} global.Response{data=global.RemoveResponseData}")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// @Router      /api/user  [delete]")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("func")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("u "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("*")]),t._v("UserController"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("Removes")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("c "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("*")]),t._v("gin"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("Context"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n\t"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// request")]),t._v("\n\treq "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("&")]),t._v("global"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("RemovesRequest"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\tu"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("ShouldBindJSON")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("c"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" req"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n\t"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// login id")]),t._v("\n\tloginId "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":=")]),t._v(" c"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("GetUint64")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"Id"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n\t"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("for")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("_")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" id "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("range")]),t._v(" req"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("Ids "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n\t\t"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),t._v(" id "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("==")]),t._v(" loginId "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n\t\t\tu"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("JSON")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("c"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" Err_User_Can_Not_Remove_self_Response"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n\t\t\t"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v("\n\t\t"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("else")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),t._v(" id "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("==")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n\t\t\tu"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("JSON")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("c"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" Err_User_Can_Not_Remove_Super_Response"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n\t\t\t"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v("\n\t\t"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\t\t"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// remove login flag")]),t._v("\n\t\tu"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("Svc"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("DelLoginStatus")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("id"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n\t"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\tu"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("JSON")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("c"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" u"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("Svc"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("Remove")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("req"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n")])])]),s("h5",{attrs:{id:"说明-2"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#说明-2"}},[t._v("#")]),t._v(" 说明")]),t._v(" "),s("table",[s("thead",[s("tr",[s("th",[t._v("注释")]),t._v(" "),s("th",[t._v("说明")])])]),t._v(" "),s("tbody",[s("tr",[s("td",[t._v("Description")]),t._v(" "),s("td",[t._v("Api行为的详细说明")])]),t._v(" "),s("tr",[s("td",[t._v("Id")]),t._v(" "),s("td",[t._v("用于标识操作的唯一字符串。在所有API操作中必须是唯一的")])]),t._v(" "),s("tr",[s("td",[t._v("Tags")]),t._v(" "),s("td",[t._v("每个API操作的标签列表，用逗号分隔。")])]),t._v(" "),s("tr",[s("td",[t._v("Summary")]),t._v(" "),s("td",[t._v("Api的简短摘要")])]),t._v(" "),s("tr",[s("td",[t._v("Accept")]),t._v(" "),s("td",[t._v("api可以使用的MIME类型列表。值必须与Mime类型下的描述一致")])]),t._v(" "),s("tr",[s("td",[t._v("Produce")]),t._v(" "),s("td",[t._v("api可以生成的MIME类型列表。值必须与Mime类型下的描述一致")])]),t._v(" "),s("tr",[s("td",[t._v("Param")]),t._v(" "),s("td",[t._v("用空格分隔的参数 param name,param type,data type,is mandatory?,comment attribute(optional)")])]),t._v(" "),s("tr",[s("td",[t._v("Security")]),t._v(" "),s("td",[t._v("每个API操作的安全性")])]),t._v(" "),s("tr",[s("td",[t._v("Success")]),t._v(" "),s("td",[t._v("用空格分隔的成功响应. return code,{param type},data type,comment")])]),t._v(" "),s("tr",[s("td",[t._v("Failure")]),t._v(" "),s("td",[t._v("用空格分隔的故障响应. return code,{param type},data type,comment")])]),t._v(" "),s("tr",[s("td",[t._v("Response")]),t._v(" "),s("td",[t._v("用空格分隔的响应. return code,{param type},data type,comment")])]),t._v(" "),s("tr",[s("td",[t._v("Router")]),t._v(" "),s("td",[t._v("路由. path,[httpMethod]")])])])]),t._v(" "),s("h6",{attrs:{id:"文档-2"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#文档-2"}},[t._v("#")]),t._v(" 文档")]),t._v(" "),s("p",[s("a",{attrs:{href:"https://swaggo.github.io/swaggo.io/declarative_comments_format/api_operation.html",target:"_blank",rel:"noopener noreferrer"}},[t._v("API Operation"),s("OutboundLink")],1)]),t._v(" "),s("h2",{attrs:{id:"生成文档"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#生成文档"}},[t._v("#")]),t._v(" 生成文档")]),t._v(" "),s("div",{staticClass:"language-shell extra-class"},[s("pre",{pre:!0,attrs:{class:"language-shell"}},[s("code",[s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 格式化swag注释")]),t._v("\n➜  gin-framework-layout git:"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("master"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" swag "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("fmt")]),t._v("                                   \n➜  gin-framework-layout git:"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("master"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" \n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 生成swag文档")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("## --parseDependency, --pd 在依赖文件夹内解析go文件，默认禁用(默认值:false)")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("## --parseInternal 在内部包中解析go文件，默认禁用(默认值:false)")]),t._v("\n➜  gin-framework-layout git:"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("master"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" swag init "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[t._v("--parseDependency")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[t._v("--parseInternal")]),t._v("      \n"),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("2022")]),t._v("/11/03 "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("16")]),t._v(":35:57 Generate swagger docs"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("..")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("..")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("2022")]),t._v("/11/03 "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("16")]),t._v(":35:57 Generate general API Info, search dir:./\n"),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("2022")]),t._v("/11/03 "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("16")]),t._v(":35:59 Generating user.UserLoginRequest\n"),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("2022")]),t._v("/11/03 "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("16")]),t._v(":35:59 Generating global.Response\n"),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("2022")]),t._v("/11/03 "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("16")]),t._v(":35:59 Generating user.UserLoginResponseData\n"),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("2022")]),t._v("/11/03 "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("16")]),t._v(":35:59 Generating user.UserCurrentResponseData\n"),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("2022")]),t._v("/11/03 "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("16")]),t._v(":35:59 Generating user.ChangePasswordRequest\n"),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("2022")]),t._v("/11/03 "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("16")]),t._v(":35:59 Generating global.UpdateResponseData\n"),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("2022")]),t._v("/11/03 "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("16")]),t._v(":35:59 Generating user.UserData\n"),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("2022")]),t._v("/11/03 "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("16")]),t._v(":35:59 Generating global.Data\n"),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("2022")]),t._v("/11/03 "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("16")]),t._v(":35:59 Generating global.CreatedBy\n"),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("2022")]),t._v("/11/03 "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("16")]),t._v(":35:59 Generating global.UpdatedBy\n"),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("2022")]),t._v("/11/03 "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("16")]),t._v(":35:59 Generating user.UserInsertRequest\n"),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("2022")]),t._v("/11/03 "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("16")]),t._v(":35:59 Generating global.InsertResponseData\n"),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("2022")]),t._v("/11/03 "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("16")]),t._v(":35:59 Generating user.UserUpdateRequest\n"),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("2022")]),t._v("/11/03 "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("16")]),t._v(":35:59 Generating global.RemovesRequest\n"),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("2022")]),t._v("/11/03 "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("16")]),t._v(":35:59 Generating global.RemoveResponseData\n"),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("2022")]),t._v("/11/03 "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("16")]),t._v(":35:59 create docs.go at  docs/docs.go\n"),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("2022")]),t._v("/11/03 "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("16")]),t._v(":35:59 create swagger.json at  docs/swagger.json\n"),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("2022")]),t._v("/11/03 "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("16")]),t._v(":35:59 create swagger.yaml at  docs/swagger.yaml\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 文档路径")]),t._v("\n➜  gin-framework-layout git:"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("master"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v("cd")]),t._v(" docs \n➜  docs git:"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("master"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" tree\n"),s("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v(".")]),t._v("\n├── docs.go\n├── swagger.json\n└── swagger.yaml\n\n"),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),t._v(" directories, "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("3")]),t._v(" files\n")])])]),s("h2",{attrs:{id:"路由"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#路由"}},[t._v("#")]),t._v(" 路由")]),t._v(" "),s("div",{staticClass:"language-go extra-class"},[s("pre",{pre:!0,attrs:{class:"language-go"}},[s("code",[s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("package")]),t._v(" router\n\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("\n\t"),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"net/http"')]),t._v("\n\n\t"),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"github.com/goweb/gin-framework-core/global"')]),t._v("\n\t"),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"github.com/gin-gonic/gin"')]),t._v("\n\n\tswaggerFiles "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"github.com/swaggo/files"')]),t._v("\n\tginSwagger "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"github.com/swaggo/gin-swagger"')]),t._v("\n\n    "),s("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("_")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"github.com/goweb/gin-framework-layout/docs"')]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("func")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("RegisterHealthyCheckRouter")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("g "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("*")]),t._v("gin"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("Engine"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n\t"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// ping router")]),t._v("\n\tg"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("GET")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"/healthyCheck"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("func")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("ctx "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("*")]),t._v("gin"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("Context"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n\t\tctx"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("JSON")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("http"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("StatusOK"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" gin"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("H"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n\t\t\t"),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"msg"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"ok"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n\t\t"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n\t"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("func")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("RegisterSwaggerRouter")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("g "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("*")]),t._v("gin"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("Engine"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n\t"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// debug mode run swagger server")]),t._v("\n\t"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),t._v(" global"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("Config"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("Sys"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("Mode "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("==")]),t._v(" gin"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("DebugMode "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("||")]),t._v(" global"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("Config"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("Sys"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("Mode "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("==")]),t._v(" gin"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("TestMode "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n\t\t"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// swagger router")]),t._v("\n\t\tg"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("GET")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"/swagger/*any"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" ginSwagger"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("WrapHandler")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("swaggerFiles"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("Handler"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n\t"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),s("div",{staticClass:"language-shell extra-class"},[s("pre",{pre:!0,attrs:{class:"language-shell"}},[s("code",[s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# go mod tidy下载相关依赖包")]),t._v("\n➜  gin-framework-layout git:"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("master"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" go mod tidy\n")])])]),s("h2",{attrs:{id:"访问"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#访问"}},[t._v("#")]),t._v(" 访问")]),t._v(" "),s("p",[s("a",{attrs:{href:"http://localhost:8888/swagger/index.html",target:"_blank",rel:"noopener noreferrer"}},[t._v("swagger地址:http://localhost:8888/swagger/index.html"),s("OutboundLink")],1)])])}),[],!1,null,null,null);s.default=e.exports}}]);